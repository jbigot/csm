Navier-Stokes equations is a well known set of PDEs in fluid dynamics to simulate a flow evolution in time. At the University of Orl\'eans, France, the MAPMO laboratory works on a software, called FullSWOF~\footnote{\url{http://www.univ-orleans.fr/mapmo/soft/FullSWOF/}}, which handles simulations of geophysical flows, for example rivers, channels, dambreak problems, ocean currents, estuarine systems, etc. This software solves the Shallow water equations obtained from the three dimensional incompressible Navier-Stokes equations, by averaging on the vertical direction (see e.g.~\cite{Ferrari2004}). Those equations are solved using a two-dimensional Cartesian discretization of the space domain, and a finite volume numerical methods more described in~\cite{HeleneLS13}.

The MSL program of FullSWOF contains three mesh entities, seven computation domains, fourty-eight data and ninty-eight computations composed of thirty-two stencil computations and sixty-six local computations.

The series-parallel tree decomposition extracted by the MSC transformation is composed of seventeen sequences and eighteen parallel sections. In Figure~\ref{fig:freq} represents the level of parallelism, \ie the number of tasks which can be executed concurrently, and gives the number of time the level is observed in the final tree.

\begin{figure}[!h]
 \begin{center}
 \begin{tabular}{c|c|c|c|c|c|c|c|c|}
   level & 1 & 2 & 3 & 4 & 6 & 10 & 12 & 16\\
   \hline
   frequence & 2 & 1 & 3 & 5 & 3 & 1 & 1 & 2\\
 \end{tabular}
\caption{Parallelism level (number of parallel tasks) and the number of times this level appear.}
\label{fig:freq}
 \end{center}
\end{figure}

Figure~\ref{fig:freq} illustrates the execution time for each step of the MSC transformation for all overall execution time of ten seconds. Execution times have been computed on a laptop with a bi-core Intel Core i5 1,4 GHz, and 8Gb LPDDR3. 

\begin{figure}[!h]
 \begin{center}
 \begin{tabular}{c|c|c|c|c|}
   step & $\Gamma_{sync}$ & $\Gamma_{dep}$ & $\Gamma_{msp}$ & $\Gamma_{tsp}$\\
   \hline
   time (ms) & 2 & 530 & 8297 & 1133\\
   \hline
   \% & 0.02 & 5.3 & 83.3 & 11.37\\
 \end{tabular}
\caption{Execution times of the MSC transformation steps}
\label{fig:freq}
 \end{center}
\end{figure}

One can notice that the transformation of $\Gamma_{dep}$ to a minimal series-parallel graph is the longest step of MSC, because of the removal of the forbidden shapes in the graph. Actually, the number of forbidden shapes removed in $\Gamma_{dep}$ is not counted, because the algorithm use a general solution instead of finding each forbidden shape, but it seems that many of them appeared. The forbidden shape, called \emph{N-shape}, is represented in Figure~\ref{fig:n}. This shape is forbidden in a minimal series-parallel graph as it is not possible to exactly express it using sequences and parallel sections. To remove a \emph{N-shape} an additionnal dependency constraint is added as illustrated in Figure~\ref{fig:over}.

\begin{figure}[h!]
\begin{center}
\subfloat[][The forbidden $N$ shape.\label{fig:n}]{
\begin{tikzpicture}[shorten >=1pt, node distance=2cm, on grid, auto]
   \node[] (a) at (0,0) {$c_0$};
   \node[] (b) at (2,0) {$c_1$};
   \node[] (c) at (0,-1) {$c_2$};
   \node[] (d) at (2,-1) {$c_3$};
 
  \path[->]
    (a) edge node {} (b)
    (c) edge node {} (b)
        edge node {} (d);
  \end{tikzpicture}
  }
  \hspace{25pt}
  \subfloat[][Over-constraint on the forbidden $N$ shape.\label{fig:over}]{
	\begin{tikzpicture}[shorten >=1pt, node distance=2cm, on grid, auto]
   \node[] (c0) at (0,0) {$c_0$};
   \node[] (bc0) at (-1,0) {};
   \node[] (c1) at (2,0) {$c_1$};
   \node[] (c2) at (0,-1) {$c_2$};
   \node[] (bc2) at (-1,-1) {};
   \node[] (c3) at (2,-1) {$c_3$};
 
  \path[->]
    (bc0) edge [dotted] node {} (c0)
    (bc2) edge [dotted] node {} (c2)
    (c0) edge node {} (c1)
          edge [dashed] node [swap] {} (c3)
    (c2) edge node {} (c1)
        edge node {} (c3);
  \end{tikzpicture}
}
  \caption{Forbidden $N$ subgraph shape for a DAG to be minimal series-parallel.}
  \label{fig:forbidden}
\end{center}
\end{figure}

The fact that many \emph{N-shape} are removed in $\Gamma_{dep}$ shows that the creation of a static shedule of tasks may not be the best solution for complex simulations. Actually, if a \emph{N-shape} cannot be represented by sequences and parallel sections, this shape can perfectly be handled by a dynamic scheduler or by the direct static representation of $\Gamma_{dep}$ where tasks wait for their input before starting.


\begin{itemize}
\item speedup Figures
\item number of lines (counting computation components)
\end{itemize}