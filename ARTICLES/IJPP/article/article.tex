%%%%%%%%%%%%%%%%%%%%%%% file template.tex %%%%%%%%%%%%%%%%%%%%%%%%%
%
% This is a general template file for the LaTeX package SVJour3
% for Springer journals.          Springer Heidelberg 2010/09/16
%
% Copy it to a new file with a new name and use it as the basis
% for your article. Delete % signs as needed.
%
% This template includes a few options for different layouts and
% content for various journals. Please consult a previous issue of
% your journal as needed.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% First comes an example EPS file -- just ignore it and
% proceed on the \documentclass line
% your LaTeX will extract the file if required
%
\RequirePackage{fix-cm}
%
%\documentclass{svjour3}                     % onecolumn (standard format)
%\documentclass[smallcondensed]{svjour3}     % onecolumn (ditto)
%\documentclass[smallextended]{svjour3}       % onecolumn (second format)
\documentclass[twocolumn]{svjour3}          % twocolumn
%
\smartqed  % flush right qed marks, e.g. at end of proof
%
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{subfig}
\usepackage{caption}
\usepackage{cite}
\usepackage{filecontents}
\usepackage{listings}
\usepackage{tikz}
\usepackage[ruled,noend]{algorithm2e}
\usetikzlibrary{calc,arrows,shapes,automata,petri,positioning,decorations.markings,shadows}

\usepackage{todonotes}

%\newtheorem{theorem}{Theorem}[section]
\newtheorem{myprop}[theorem]{Proposition}
% \newenvironment{proof}[1][Proof]{\begin{trivlist}
% \item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}
\newenvironment{mydef}[1][Definition]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}
\newenvironment{myth}[1][Theorem]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}

\def\pprec{\mathrel{\scalebox{.9}[1]{$\prec$}\mkern-3mu%
  \scalebox{.4}[1]{$\prec$}\mkern-5.5mu\scalebox{.4}[1]{$\prec$}}}
%
% \usepackage{mathptmx}      % use Times fonts if available on your TeX system
%
% insert here the call for the packages your document requires
%\usepackage{latexsym}
% etc.
%
% please place your own definitions here and don't use \def but
% \newcommand{}{}
%
% Insert the name of "your journal" with
% \journalname{myjournal}
%
\begin{document}

\title{The Multi-Stencil Language}
%\subtitle{Do you have a subtitle?\\ If so, write it here}

%\titlerunning{Short form of title}        % if too long for running head

\author{Helene Coullon         \and
        Chirtsian Perez \and
        Julien Bigot
}

%\authorrunning{Short form of author list} % if too long for running head

\institute{Helene Coullon \and Christian Perez \at
              INRIA \\
              46 All√©e d'Italie\\
              69007 Lyon\\
              \email{helene.coullon@inria.fr}
           \and
           Julien Bigot \at
              CEA
}

%\date{Received: date / Accepted: date}
% The correct dates will be entered by the editor


\maketitle

\begin{abstract}
Insert your abstract here.
\keywords{First keyword \and Second keyword \and More}
\end{abstract}

%------------------------------------------------------------------------------
\section{Introduction}
\label{sect:introduction}
Contributions :
\begin{itemize}
\item Formalism of a multi-stencil program and its parallelization
\item The Multi-stencil Language: agnostic from the type of mesh and of the choosen implementation
\item A first implementation of the MSL compiler (static scheduling + fusion + dump to SkelGIS/components)
\item Evaluation of the different types of parallelism introduced + compiler + fusion
\end{itemize}
%------------------------------------------------------------------------------
\section{Computational model of Multi-Stencil Programs}
\label{sect:formalism}
\input{formalism.tex}
% Formalism :
% \begin{itemize}
% \item mesh / mesh entities and groups / computations domains
% \item data and scalars
% \item computations : stencil, local and reduction
% \item Multi-Stencil Program
% \end{itemize}
%------------------------------------------------------------------------------
\section{Parallelization of Multi-Stencil Programs}
\label{sect:parallelism}
\input{parallelism.tex}
% Parallelization formalism :
% \begin{itemize}
% \item Data parallelism (introduction of synchronizations)
% \item Task parallelism (computation of the dependency graph)
% \end{itemize}
%------------------------------------------------------------------------------
\section{The Multi-Stencil Language}
\label{sect:msl}
\input{msl.tex}
% The parallel empty skeleton of the application can be computed automatically from the language :
% \begin{itemize}
% \item grammar
% \item example from the language to the dependency graph
% \end{itemize}
%------------------------------------------------------------------------------
\section{Static Scheduling}
\label{sect:msp}
\input{msp.tex}
% From the dependency graph we study a first dump: static scheduling
% \begin{itemize}
% \item description of the algorithm to get the binary tree decomposition of a minimal serie-parallel graph
% \item use of the serie-parallel tree decomposition to detect fusions of kernels
% \item example (the same one) from the dependency graph to the binary tree
% \end{itemize}
%------------------------------------------------------------------------------
\section{Evaluation}
\label{sect:eval}
\begin{itemize}
\item short description of the implementation (compiler in Python, DDS = SkelGIS, Components)
\item evaluation of the compiler (execution times of the different steps)
\item evaluation of the data parallelism (weak/strong scaling)

\begin{figure}[!h]\begin{center}
  \resizebox{8cm}{!}{\includegraphics{../results/weak_scaling/400/median_weak.pdf}}
  \caption{weak-scaling 400x400 blocks.}
  \label{fig:mesh}
\end{center}\end{figure}

\begin{figure}[!h]\begin{center}
  \resizebox{8cm}{!}{\includegraphics{../results/weak_scaling/800/median_weak.pdf}}
  \caption{weak-scaling 800x800 blocks}
  \label{fig:mesh}
\end{center}\end{figure}

\begin{figure}[!h]\begin{center}
  \resizebox{8cm}{!}{\includegraphics{../results/strong_scaling/10K_1K/median_strong.pdf}}
  \caption{strong-scaling 10kx10k, 1k iterations}
  \label{fig:mesh}
\end{center}\end{figure}

\item evaluation of the fusion

\begin{figure}[!h]\begin{center}
  \resizebox{8cm}{!}{\includegraphics{../results/task_scaling/500_200/fusVSbase.pdf}}
  \caption{strong scaling 500x500, 200 iterations, with and without fusion}
  \label{fig:mesh}
\end{center}\end{figure}

\item evaluation of the hybrid parallelism

\begin{figure}[!h]\begin{center}
  \resizebox{8cm}{!}{\includegraphics{../results/task_scaling/500_200/base_close_median.pdf}}
  \caption{MPI only vs MPI+threads with \emph{close} scheduling policy (OpenMP)}
  \label{fig:mesh}
\end{center}\end{figure}

\begin{figure}[!h]\begin{center}
  \resizebox{8cm}{!}{\includegraphics{../results/task_scaling/500_200/base_spread_median.pdf}}
  \caption{MPI only vs MPI+threads with \emph{spread} scheduling policy (OpenMP)}
  \label{fig:mesh}
\end{center}\end{figure}

\item analytic model for the results

\begin{figure}[!h]\begin{center}
  \resizebox{8cm}{!}{\includegraphics{../results/task_scaling/500_200/analytic/times.pdf}}
  \caption{Computation vs communication times in the MPI only application}
  \label{fig:mesh}
\end{center}\end{figure}

\end{itemize}
%------------------------------------------------------------------------------
\section{Related work}
\label{sect:rel}
\begin{itemize}
\item Lizst, Pochoir, PATUS for optimizations/parallelization of a single stencil kernel + mesh dependent
\item Halide for pipeline of stencil computations = mesh dependent
\item Reuse of external solutions as SkelGIS, GA, Lizst, Pochoir etc.
\end{itemize}
%------------------------------------------------------------------------------
\section{Conclusion}
\label{sect:concl}
%------------------------------------------------------------------------------

%\begin{acknowledgements}
%If you'd like to thank anyone, place your comments here
%and remove the percent signs.
%\end{acknowledgements}

\bibliographystyle{spbasic}
\bibliography{biblio}

\end{document}
% end of file template.tex

