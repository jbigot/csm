In this paper, we have presented the Multi-Stencil Framework. MSF is built upon a meta-model of a multi-stencil program which has been presented in Section~\ref{sect:formalism}. From this meta-model has been designed, first, the generic component assembly of a multi-stencil program, and second, the domain specific language MSL that enables the description of a specific application by a numerician. From these entries, the MSF compiler, namely MSC, is able to generate automatically a parallel specific assembly of the simulation. This specific assembly represents the parallel orchestration of computations, independently of implementation choices. Moreover, by combining a meta-model and component-based programming models MSF has the particularity to enhance separation of concerns and code-reuse of existing solutions (\eg SkelGIS and OpenMP in this paper). Finally, MSF has been evaluated on the real case simulation FullSWOF2D. Results have shown that even if component models have been used, strong and weak scalings of MSF (for its data parallelization technique) do not suffer from overheads. Results have also shown that the hybrid parallelization handled by MSF could increase performances when MPI communications are too heavy, which is a new contribution compared to existing solutions. Finally, we have presented evaluations on fusion optimization that demonstrates that fusion is not always a good choice, particularly when performing hybrid parallelism.

Many perspectives of future work raise from this paper. First, even if using one distributed data structure or another is possible and facilitated by MSF, the HPC specialist still has to understand component programming models and the meta-model of the framework to add new back-ends. We think it could be interesting to also facilitate the work of the HPC specialist by proposing a semi-automated framework to add external tools to MSF.

Second, it has been shown in the performance model and evaluation results that the choice between data parallelism and hybrid parallelism in not trivial. It depends on the time spent in computations, the number of cores and nodes used for the execution, as well as the network behavior (Fig.~\ref{fig:limit} and~\ref{fig:close}). MSF, thanks to its meta-model and to the use of component models, handles the activation of one parallelism technique or another. Thus MSF can be considered as a performance leverage for multi-stencil programs. However, it would be interesting to investigate how an actor algorithm could choose the best parallelization technique for a given execution of a production multi-stencil simulation.

The same choice problem is raised by fusion evaluations of Section~\ref{sect:fus}. Actually, fusion optimization is not always relevant. Thus, for the same reasons than parallelization techniques, an actor algorithm could choose the best solution for a given execution. To design such actor algorithms different solutions should be studied, such as following an approximated behavior model, or using calibration runs to then use deep learning algorithms etc.

Finally, by using component models doors are opened to reconfiguration of applications~\cite{Lanore:2015:RCM:2737166.2737169} which means that the application could adapt its behavior and structure to external events.